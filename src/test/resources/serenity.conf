#
# BROWSERSTACK TEST EXECUTION
# You define the BrowserStack credentials either in the BROWSERSTACK_USER and BROWSERSTACK_KEY environment variables
#
webdriver {
  base.url = "http://todomvc.com/examples/angularjs/#/"
  driver = "remote"
  remote.url = "https://"${BROWSERSTACK_USER}":"${BROWSERSTACK_KEY}"@hub.browserstack.com/wd/hub"
}

environment = edge_windows_10
environments {
  chrome_windows_11 {
    webdriver {
      capabilities {
        browserName = "Chrome"
        acceptInsecureCerts = true
        "goog:chromeOptions" {
          args = ["test-type", "ignore-certificate-errors", "headless", "--window-size=1000,800"
            "incognito", "disable-infobars", "disable-gpu", "disable-default-apps", "disable-popup-blocking"]
        }
        "bstack:options" {
          os = "Windows"
          osVersion = "11"
          browserVersion = "latest"
          resolution = "1920x1200"
          idleTimeout = 600
        }
      }
    }
  }
  edge_windows_10 {
    webdriver {
      capabilities {
        browserName = "Edge"
        acceptInsecureCerts = true
        "bstack:options" {
          os = "Windows"
          osVersion = "10"
          browserVersion = "latest"
          resolution = "1920x1200"
          idleTimeout = 600
        }
      }
    }
  }
  firefox_windows_10 {
    webdriver {
      capabilities {
        browserName = "Firefox"
        acceptInsecureCerts = true
      }
    }
    "bstack:options" {
      os = "Windows"
      osVersion = "10"
      browserVersion = "latest"
      resolution = "1920x1200"
      idleTimeout = 600
    }
  }
  safari_osx {
    webdriver {
      capabilities {
        browserName = "Safari"
        acceptInsecureCerts = true
      }
      "bstack:options" {
        os = "OS X"
        osVersion = "Sonoma"
        browserVersion = "latest"
        resolution = "1920x1200"
        idleTimeout = 600
      }
    }
  }
}

headless.mode = true

serenity {
  project.name = "Serenity BDD TodoMVC"
  tag.failures = "true"
  linked.tags = "issue"
  restart.browser.for.each = scenario
  logging = verbose
  #
  # Use these options to reduce the size of the reports
  #
  # Report on test durations
  report.test.durations = true
  take.screenshots = FOR_EACH_ACTION
  # Store HTML source for each page
  # (can be: FOR_EACH_ACTION, BEFORE_AND_AFTER_EACH_STEP, FOR_FAILURES or DISABLED)
  # store.html = FAILURES
}
# Default page configuration
home.page = "http://todomvc.com/examples/angularjs/#/"
